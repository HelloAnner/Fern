
System Activity Reporter

系统性能分析工具，它用于监视和报告系统资源使用情况。sar可以收集和显示各种系统指标，包括CPU使用率、内存使用情况、磁盘活动、网络统计等

- `-u`：显示CPU使用率报告
- `-r`：显示内存使用情况报告
- `-b`：显示磁盘I/O活动报告
- `-n`：显示网络统计报告
- `-q`：显示系统负载报告
- `-p`：显示进程活动报告
- `-P`：显示每个CPU核心的使用率报告

### -r  内存占用

```shell
[root@pftest0 ~]# sar -r 1
Linux 3.10.0-1160.15.2.el7.x86_64 (pftest0) 	2024年01月04日 	_x86_64_	(32 CPU)

17时15分29秒 kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty
17时15分30秒    408652  65300084     99.38   1139656  16265684  57547080     87.58  52186812   9961368      7196
17时15分31秒    408828  65299908     99.38   1139656  16265692  57547080     87.58  52186852   9961344      7732
17时15分32秒    408988  65299748     99.38   1139656  16265696  57546820     87.58  52186876   9961368      7736
17时15分33秒    408752  65299984     99.38   1139656  16266248  57545472     87.58  52187300   9961564      7196
17时15分34秒    408752  65299984     99.38   1139656  16266280  57545748     87.58  52187328   9961576      7228
17时15分35秒    408640  65300096     99.38   1139660  16266636  57546400     87.58  52187568   9961688      7588
```

- `kbmemfree`：可用内存的大小（以KB为单位）。
- `kbmemused`：已使用内存的大小（以KB为单位）。
- `kbbuffers`：用作缓冲区的内存大小（以KB为单位）。
- `kbcached`：用作缓存的内存大小（以KB为单位）。
- `kbswpfree`：可用交换空间的大小（以KB为单位）。
- `kbswpused`：已使用交换空间的大小（以KB为单位）


### -B 内存分页交换


```
17时27分09秒  pgpgin/s pgpgout/s   fault/s  majflt/s  pgfree/s pgscank/s pgscand/s pgsteal/s    %vmeff
17时27分10秒      0.00     32.00 320332.00      0.00  15736.00      0.00      0.00      0.00      0.00
17时27分11秒      0.00    296.00   6989.00      0.00   1429.00      0.00      0.00      0.00      0.00
17时27分12秒      0.00      0.00   5359.00      0.00   1291.00      0.00      0.00      0.00      0.00
17时27分13秒      0.00      0.00 314201.00      0.00   8894.00      0.00      0.00      0.00      0.00
17时27分14秒      0.00      0.00 235953.00      0.00   8357.00      0.00      0.00      0.00      0.00
```

[【linux性能】【详细】内存性能分析---第3篇\_pgsteal vmeff-CSDN博客](https://blog.csdn.net/qq_23150755/article/details/113182424)


### -u

```
17时17分54秒     CPU     %user     %nice   %system   %iowait    %steal     %idle
17时17分55秒     all      0.19      0.00      0.16      0.00      0.00     99.66
17时17分56秒     all      5.99      0.00      0.78      0.00      0.00     93.23
17时17分57秒     all      4.88      0.00      0.75      0.00      0.00     94.37
17时17分58秒     all      0.75      0.00      0.09      0.03      0.00     99.12
17时17分59秒     all      0.59      0.00      0.22      0.00      0.00     99.19
17时18分00秒     all      0.28      0.00      0.16      0.00      0.00     99.56
17时18分01秒     all     16.39      0.00      4.12      0.00      0.00     79.49
```

- `%user`：用户空间进程所占CPU时间的百分比。
- `%nice`：以较低优先级运行的用户空间进程所占CPU时间的百分比。
- `%system`：内核空间进程所占CPU时间的百分比。
- `%iowait`：CPU等待I/O完成的时间的百分比。
- `%steal`：虚拟化环境中，被其他虚拟机或主机“偷取”的时间的百分比。
- `%idle`：CPU空闲时间的百分比。

### -b

```
17时20分43秒       tps      rtps      wtps   bread/s   bwrtn/s
17时20分44秒      0.00      0.00      0.00      0.00      0.00
17时20分45秒      0.00      0.00      0.00      0.00      0.00
17时20分46秒      7.00      0.00      7.00      0.00   2384.00
17时20分47秒      2.00      0.00      2.00      0.00     95.00
```

- `tps`：每秒钟的传输请求数。
- `rtps`：每秒钟的读取请求数。
- `wtps`：每秒钟的写入请求数。
- `bread/s`：每秒钟的读取数据量（以块为单位）。
- `bwrtn/s`：每秒钟的写入数据量（以块为单位）。



### -n


- `rxpck/s`：每秒钟接收的数据包数。
- `txpck/s`：每秒钟发送的数据包数。
- `rxkB/s`：每秒钟接收的数据量（以KB为单位）。
- `txkB/s`：每秒钟发送的数据量（以KB为单位）。

### -q
- `runq-sz`：运行队列的平均长度。
- `plist-sz`：进程列表（包括运行和睡眠状态）的长度。
- `ldavg-1`：过去1分钟的平均负载。
- `ldavg-5`：过去5分钟的平均负载。
- `ldavg-15`：过去15分钟的平均负载。


### -p




- `PID`：进程ID。
- `%usr`：用户空间CPU时间的百分比。
- `%system`：内核空间CPU时间的百分比。
- `%guest`：虚拟化环境中，来宾操作系统使用的CPU时间的百分比。
- `%CPU`：总CPU时间的百分比。
- `minflt/s`：每秒钟的次要页面错误数。
- `majflt/s`：每秒钟的主要页面错误数。
- `VSZ`：进程的虚拟内存大小。
- `RSS`：进程的物理内存大小。



- [ ]  复习 sar (@2024-02-01)